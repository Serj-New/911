{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list_page/local-storage.js","../src/js/shopping-list_page/pagination.js","../src/js/shopping-list_page/shopping-list.js"],"sourcesContent":["import { getBookById } from '../home_page/books-api';\n\n// handleAddBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для додавання книжки\n\n// handleDelBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для видалення книжок\n\n\nexport async function handleAddBtnClick(bookId) {\n  const data = await getBookById(bookId);\n  saveToLS(data._id, data);\n}\n\nexport function handleDelBtnClick(bookId) {\n  localStorage.removeItem(bookId);\n}\n\nexport function handleGetBtnClick() {\n  const itemCount = localStorage.length;\n  const downloadedBooks = [];\n\n  for (let i = 0; i < itemCount; i++) {\n    const key = localStorage.key(i);\n    const value = loadFromLS(key);\n\n    if (value._id) {\n      downloadedBooks.push(value);\n    }\n  }\n    return downloadedBooks;\n}\n\nfunction saveToLS(key, value) {\n  const serializedData = JSON.stringify(value);\n  localStorage.setItem(key, serializedData);\n}\n\nfunction loadFromLS(key) {\n  const serializedData = localStorage.getItem(key);\n  try {\n    return JSON.parse(serializedData);\n  } catch {\n    return serializedData;\n  }\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { handleGetBtnClick } from './local-storage';\nconst itemsPerPage = 1; // Кількість елементів на сторінці\nconst books = handleGetBtnClick(); // Отримання книг з localStorage\nconst totalItems = books.length; // Загальна кількість книг\nconst pagination = new Pagination('pagination', {\n  totalItems,\n  itemsPerPage,\n  visiblePages: 1, // Кількість видимих сторінок у пагінації\n  centerAlign: true, // Вирівнювання по центру\n});\npagination.on('afterMove', event => {\n  const { page } = event;\n  const startIdx = (page - 1) * itemsPerPage;\n  const endIdx = startIdx + itemsPerPage;\n  const currentPageBooks = books.slice(startIdx, endIdx);\n  renderBooks(currentPageBooks); // Функція для відображення книг на поточній сторінці\n});\npagination.movePageTo(1);\nfunction renderBooks(books) {\n  const bookList = document.querySelector('.shop-list-js');\n  bookList.innerHTML = ''; // Очистити список книг перед відображенням нових\n\n  books.forEach(book => {\n    const bookItem = document.createElement('li');\n    bookItem.classList.add('book-card');\n\n    bookItem.innerHTML = `\n            <div class=\"book-image\">\n                <img src=\"${book.imageUrl}\" alt=\"${book.title}\" />\n            </div>\n            <div class=\"book-info\">\n                <h2 class=\"book-title\">${book.title}</h2>\n                <p class=\"book-category\">${book.category}</p>\n                <p class=\"book-description\">${book.description}</p>\n                <p class=\"book-author\">${book.author}</p>\n                <ul class=\"book-links\">\n                    ${book.marketplaces}.map(link => <li><a href=\"${link}\">Marketplace</a></li>).join('')}\n                </ul>\n                <button class=\"remove-button\">Remove</button>\n            </div>\n        `;\n    bookList.appendChild(bookItem);\n  });\n}\n","import './pagination';\nimport './local-storage';\n\nimport { handleAddBtnClick, handleGetBtnClick, handleDelBtnClick } from '../shopping-list_page/local-storage'; // видалити handleAddBtnClick\n\nconst refs = {\n    shopListEmptElem: document.querySelector(\".shop-list-empty\"),\n    shopListDivElem: document.querySelector(\".shopping-list\"),\n    shopListElem: document.querySelector(\".shop-list\"),\n    pageHeader: document.querySelector(\".header-home\"),\n}\n\nhandleAddBtnClick(\"643282b1e85766588626a081\"); // видалити\nhandleAddBtnClick(\"643282b1e85766588626a0b2\"); //\nhandleAddBtnClick(\"643282b2e85766588626a112\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0d4\"); //\n\n\nconst booksList = handleGetBtnClick();\nrenderShopList(booksList);\n\nfunction renderShopList(booksList) {\n    console.log(booksList);\n    if (booksList.length === 0) {\n        refs.shopListEmptElem.classList.remove(\"is-hidden\");\n    } else {\n        refs.shopListEmptElem.classList.add(\"is-hidden\");\n        const markup = shopListTemplate(booksList);\n        refs.shopListElem.insertAdjacentHTML(\"beforeend\", markup);\n    }\n\n    const deleteBtnElements = document.querySelectorAll(\".shop-list-delete-btn\");\n    deleteBtnElements.forEach(button => {\n        button.addEventListener(\"click\", onDeleteBtnClick);\n    });\n\n    function onDeleteBtnClick(event) {\n        const id = event.target.closest(\".shop-list-item\").id;\n        handleDelBtnClick(id);\n        const bookToRemove = document.getElementById(id);\n        bookToRemove.parentNode.removeChild(bookToRemove);\n        if (refs.shopListElem.childElementCount === 0) {\n            refs.shopListEmptElem.classList.remove(\"is-hidden\");\n        }\n        \n    }\n}\n\nfunction shopListTemplate(books) {\n    return books.map(bookTemplate).join(\"\");\n}\n\nfunction bookTemplate(book) {\n    const { _id, book_image, title, list_name, description, author, amazon_product_url, buy_links } = book;\n\n    return `<li class=\"shop-list-item\" id=\"${_id}\">\n        <img class=\"shop-list-img\"\n            src=\"${book_image}\"\n            alt=\"${title}\" />  \n        <div class=\"book-info\">\n        <h1 class=\"book-title\">${title}</h1>\n        <p class=\"book-category\">${list_name}</p>\n        <p class=\"book-description\">${description}</p>\n        <div class=\"card-footer\">\n        <p class=\"book-author\">${author}</p>\n        <ul class=\"book-shop-links\">\n        <li><a href=\"${amazon_product_url}\" target=\"_blank\"><img class=\"book-shop-img amazon-logo\"\n        srcset=\"\n        /img/internet-shops/amazon@1x.png 1x,\n        /img/internet-shops/amazon@2x.png 2x\" \n        src=\"/img/internet-shops/amazon@1x.png\"\n        alt=\"Amazon logo\"\n        width=\"32\"\n        height=\"11\"/></a></li>\n        <li><a class=\"book-shop-link\" href=\"${buy_links[1].url}\" target=\"_blank\"><img class=\"book-shop-img apple-books-logo\"\n        srcset=\"\n        /img/internet-shops/book@1x.png 1x,\n        /img/internet-shops/book@2x.png 2x\" \n        src=\"/img/internet-shops/book@1x.png\"\n        alt=\"Apple Books logo\"\n        width=\"16\"\n        height=\"16\"/></a></li>\n        </ul>\n        </div>\n        <button class=\"shop-list-delete-btn\"><svg class=\"delete-btn-icon\">\n                  <use href=\"/img/icons.svg#icon-trash\"></use>\n                </svg></button> \n        </div>\n    </li>`;\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n    refs.pageHeader.dataset.pageName = 'shopping-list';\n});"],"names":["handleAddBtnClick","bookId","data","getBookById","saveToLS","handleDelBtnClick","handleGetBtnClick","itemCount","downloadedBooks","i","key","value","loadFromLS","serializedData","itemsPerPage","books","totalItems","pagination","Pagination","event","page","startIdx","endIdx","currentPageBooks","renderBooks","bookList","book","bookItem","refs","booksList","renderShopList","markup","shopListTemplate","button","onDeleteBtnClick","id","bookToRemove","bookTemplate","_id","book_image","title","list_name","description","author","amazon_product_url","buy_links"],"mappings":"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"}