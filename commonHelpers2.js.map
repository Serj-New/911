{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list_page/local-storage.js","../src/js/shopping-list_page/shopping-list.js"],"sourcesContent":["import { getBookById } from '../home_page/books-api';\n\n// handleAddBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для додавання книжки\n\n// handleDelBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для видалення книжок\n\n\nexport async function handleAddBtnClick(bookId) {\n  const data = await getBookById(bookId);\n  saveToLS(data._id, data);\n}\n\nexport function handleDelBtnClick(bookId) {\n  localStorage.removeItem(bookId);\n}\n\nexport function handleGetBtnClick() {\n  const itemCount = localStorage.length;\n  const downloadedBooks = [];\n\n  for (let i = 0; i < itemCount; i++) {\n    const key = localStorage.key(i);\n    const value = loadFromLS(key);\n\n    if (value._id) {\n      downloadedBooks.push(value);\n    }\n  }\n    return downloadedBooks;\n}\n\nfunction saveToLS(key, value) {\n  const serializedData = JSON.stringify(value);\n  localStorage.setItem(key, serializedData);\n}\n\nfunction loadFromLS(key) {\n  const serializedData = localStorage.getItem(key);\n  try {\n    return JSON.parse(serializedData);\n  } catch {\n    return serializedData;\n  }\n}\n","import { handleAddBtnClick, handleGetBtnClick, handleDelBtnClick } from '../shopping-list_page/local-storage'; // видалити handleAddBtnClick\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nconst refs = {\n    shopListEmptElem: document.querySelector(\".shop-list-empty\"),\n    shopListDivElem: document.querySelector(\".shopping-list\"),\n    shopListElem: document.querySelector(\".shop-list\"),\n    pageHeader: document.querySelector(\".header-home\"),\n    paginationElem: document.getElementById(\"pagination\"),\n}\n        \nhandleAddBtnClick(\"643282b1e85766588626a081\"); // видалити\nhandleAddBtnClick(\"643282b1e85766588626a0b2\"); //\nhandleAddBtnClick(\"643282b2e85766588626a112\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0d4\"); //\nhandleAddBtnClick(\"643282b1e85766588626a085\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0b6\"); //\nhandleAddBtnClick(\"643282b1e85766588626a087\"); //\nhandleAddBtnClick(\"643282b2e85766588626a0f2\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0d2\"); //\nhandleAddBtnClick(\"643282b1e85766588626a086\"); //\nhandleAddBtnClick(\"643282b2e85766588626a116\"); //\nhandleAddBtnClick(\"643282b2e85766588626a0f4\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0b4\"); //\n\nlet booksList = handleGetBtnClick();\n\nconst options = {\n    totalItems: booksList.length,\n    itemsPerPage: 3, \n    visiblePages: 3,\n    centerAlign: true,\n}\nconst pagination = new Pagination('pagination', options);\n\nrenderWithPagination();\n\npagination.on('afterMove', renderWithPagination);\n\nfunction renderWithPagination() {\n    const currentPage = pagination.getCurrentPage();\n    const itemsPerPage = pagination._options.itemsPerPage;\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    const booksToRender = booksList.slice(startIndex, endIndex);\n    renderShopList(booksToRender);\n}\nfunction renderShopList(booksList) {\n    if (booksList.length === 0) {\n        refs.shopListEmptElem.classList.remove(\"is-hidden\");\n        refs.paginationElem.classList.add(\"is-hidden\");\n    } else {\n        refs.shopListEmptElem.classList.add(\"is-hidden\");\n        refs.paginationElem.classList.remove(\"is-hidden\");\n        const markup = shopListTemplate(booksList);\n        refs.shopListElem.innerHTML = markup;\n        const deleteBtnElements = document.querySelectorAll(\".shop-list-delete-btn\");\n        deleteBtnElements.forEach(button => {\n            button.addEventListener(\"click\", onDeleteBtnClick);\n        });\n    }\n}\n\nfunction onDeleteBtnClick(event) {\n    const id = event.target.closest(\".shop-list-item\").id;\n    handleDelBtnClick(id);\n    const bookToRemove = document.getElementById(id);\n    bookToRemove.parentNode.removeChild(bookToRemove);\n    booksList = handleGetBtnClick();\n    const userCurrentPage = pagination.getCurrentPage();\n    pagination.reset(booksList.length);\n    renderWithPagination();\n    pagination.movePageTo(userCurrentPage);\n    if (refs.shopListElem.childElementCount === 0) {\n        refs.shopListEmptElem.classList.remove(\"is-hidden\");\n    }\n}\n\nfunction shopListTemplate(books) {\n    return books.map(bookTemplate).join(\"\");\n}\n\nfunction bookTemplate(book) {\n    const { _id, book_image, title, list_name, description, author, amazon_product_url, buy_links } = book;\n\n    return `<li class=\"shop-list-item\" id=\"${_id}\">\n        <img class=\"shop-list-img\"\n            src=\"${book_image}\"\n            alt=\"${title}\" />  \n        <div class=\"book-info\">\n        <h1 class=\"book-title\">${title}</h1>\n        <p class=\"book-category\">${list_name}</p>\n        <p class=\"book-description\">${description}</p>\n        <div class=\"card-footer\">\n        <p class=\"book-author\">${author}</p>\n        <ul class=\"book-shop-links\">\n        <li><a href=\"${amazon_product_url}\" target=\"_blank\"><img class=\"book-shop-img amazon-logo\"\n        srcset=\"\n        /img/internet-shops/amazon@1x.png 1x,\n        /img/internet-shops/amazon@2x.png 2x\" \n        src=\"/img/internet-shops/amazon@1x.png\"\n        alt=\"Amazon logo\"\n        width=\"32\"\n        height=\"11\"/></a></li>\n        <li><a class=\"book-shop-link\" href=\"${buy_links[1].url}\" target=\"_blank\"><img class=\"book-shop-img apple-books-logo\"\n        srcset=\"\n        /img/internet-shops/book@1x.png 1x,\n        /img/internet-shops/book@2x.png 2x\" \n        src=\"/img/internet-shops/book@1x.png\"\n        alt=\"Apple Books logo\"\n        width=\"16\"\n        height=\"16\"/></a></li>\n        </ul>\n        </div>\n        <button class=\"shop-list-delete-btn\"><svg class=\"delete-btn-icon\">\n                  <use href=\"/img/icons.svg#icon-trash\"></use>\n                </svg></button> \n        </div>\n    </li>`;\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n    refs.pageHeader.dataset.pageName = 'shopping-list';\n});\n"],"names":["handleAddBtnClick","bookId","data","getBookById","saveToLS","handleDelBtnClick","handleGetBtnClick","itemCount","downloadedBooks","i","key","value","loadFromLS","serializedData","refs","booksList","options","pagination","Pagination","renderWithPagination","currentPage","itemsPerPage","startIndex","endIndex","booksToRender","renderShopList","markup","shopListTemplate","button","onDeleteBtnClick","event","id","bookToRemove","userCurrentPage","books","bookTemplate","book","_id","book_image","title","list_name","description","author","amazon_product_url","buy_links"],"mappings":"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"}