{"version":3,"file":"commonHelpers.js","sources":["../src/js/scroll-up.js","../src/js/home_page/render.js","../src/js/home_page/home-page.js"],"sourcesContent":["const scrollUpBtn = document.querySelector('.scroll-up');\nscrollUpBtn.style.display = 'none';\n\nfunction showScrollUpBtn() {\n  if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {\n    scrollUpBtn.style.display = 'block';\n  } else {\n    scrollUpBtn.style.display = 'none';\n  }\n}\n\nexport function scrollUp() {\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nscrollUpBtn.addEventListener('click', scrollUp);\nwindow.addEventListener('scroll', showScrollUpBtn);","//*****************Рендеринг лівої сторони*****************//\n\nexport async function renderCategoryList(fetch) {\n  let markup = `<li class=\"categories-list\">\n                  <a class=\"category-link current-category\" data-category=\"All Categories\" href=\"#\">All categories</a>\n                </li>`;\n\n  fetch.forEach(({ list_name }) => {\n    markup += `<li class=\"categories-list\">\n                 <a class=\"category-link\" data-category=\"${list_name}\" href=\"#\">${list_name}</a>\n               </li>`;\n  });\n\n  return markup;\n}\n\nexport async function currentCategory(value) {\n  const currentCategoryElement = document.querySelector('.current-category');\n  if (currentCategoryElement) {\n    currentCategoryElement.classList.remove('current-category');\n  } \n  \n  const newCategoryElement = document.querySelector(`a[data-category=\"${value}\"]`);\n  if (newCategoryElement) {\n    newCategoryElement.classList.add('current-category');\n  } else {\n    console.error(`Element with category \"${value}\" not found.`);\n  }\n}\n\n//*****************Рендеринг головної сторінки*****************//\n\nimport {\n  getBookCategoryList,\n  getTopBooks,\n  getBookByCategory,\n  getBookById,\n} from '../home_page/books-api.js';\n\nconst listBooksByCategory = document.querySelector('.main-page-right');\n\nwindow.addEventListener('resize', () => {\n  listBooksByCategory.innerHTML = '';\n  onPageLoad();\n});\n\nfunction getLimitedBooks(books) {\n  if (window.innerWidth < 768) {\n    return books.slice(0, 1); // Для мобільних: лише 1 книга в категорії\n  } else if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    return books.slice(0, 3); // Для планшетів: 3 книги в категорії\n  } else {\n    return books.slice(0, 5); // Для десктопів: 5 книг в категорії\n  }\n}\n\nfunction createBookListOnMain(bookCard) {\n  let limitedBooks = getLimitedBooks(bookCard.books);\n  let catName = bookCard.list_name;\n  let result = `\n    <li class=\"main-page-book-title\">${bookCard.list_name}</li>\n    <ul class=\"main-page-books-render\">`;\n  limitedBooks.forEach(({ title, _id, author, book_image }) => {\n    result += `\n    <li class=\"main-page-book-render-item\">\n      <div class=\"book-card\">\n        <div class=\"image-overlay js-book-card\" data-id=\"${_id}\">\n          <img class=\"book-image\" src=\"${book_image}\" alt=\"${title}\" />\n          <div class=\"image-description\">\n            <p class=\"image-overlay-description\">quick view</p>\n          </div>\n        </div>\n        <div class=\"book-details\">\n          <h2 class=\"book-title\">${title}</h2>\n          <p class=\"book-author\">${author}</p>\n        </div>\n      </div>\n    </li>`;\n  });\n\n  result += `</ul><div>\n    <button class=\"button-see-more\" type=\"button\" data-catname=\"${catName}\">See more</button>\n  </div>`;\n  return result;\n}\n\nexport async function renderBookListOnMain(bookCard) {\n  const markup = bookCard.map(createBookListOnMain).join(``);\n  const bookList = document.querySelector('.main-page-book');\n  bookList.insertAdjacentHTML('beforeend', markup);\n}\n\n/********************************** */\n\nexport async function onPageLoad() {\n  const listBooksByCategory = document.querySelector('.main-page-right');\n  \n  if(listBooksByCategory) {\n    listBooksByCategory.innerHTML = '';\n    let result = '';\n    result += `<h2 class=\"main-page-title\">Best Sellers <span class=\"main-page-title-span\">Books</span></h2>\n    <ul class=\"main-page-book js-main-page-book\"></ul>`;\n    listBooksByCategory.insertAdjacentHTML('afterbegin', result);\n    const topBooks = await getTopBooks();\n    await renderBookListOnMain(topBooks);\n    onSeeMoreBtnClick();\n  }\n  \n}\nonPageLoad();\n\n//********************** Рендер при кліку на категорії ***********************************/\n\nfunction bookListByCategory(booksByCategory) {\n  const categoryName = booksByCategory[0].list_name;\n  const words = categoryName.split(' ');\n  const firstPart = words.slice(0, -1).join(' ');\n  const lastWord = words[words.length - 1];\n  let result = '';\n\n  result += `<h2 class=\"main-page-title\">${firstPart}<span class=\"main-page-title-span\"> ${lastWord}</span></h2>`;\n  result += '<ul class=\"main-page-books-render js-main-page-book\">';\n\n  booksByCategory.forEach(({ title, _id, author, book_image }) => {\n    result += `\n    <li class=\"main-page-book-render-item\">\n    <div class=\"book-card\">\n      <div class=\"image-overlay js-book-card\" data-id=\"${_id}\">\n        <img class=\"book-image\" src=\"${book_image}\" alt=\"${title}\" />\n        <div class=\"image-description\"\">\n          <p class=\"image-overlay-description\">quick view</p>\n        </div>\n      </div>\n      <div class=\"book-details\">\n        <h2 class=\"book-title\">${title}</h2>\n        <p class=\"book-author\">${author}</p>\n      </div>\n    </div>\n  </li>`;\n  });\n\n  result += `</ul>`;\n  return result;\n}\n\nexport function renderBookListByCategory(booksByCategory) {\n  listBooksByCategory.innerHTML = '';\n  const markup = bookListByCategory(booksByCategory);\n  listBooksByCategory.insertAdjacentHTML('afterbegin', markup);\n}\n\n/************************************ See more **********/\nimport { scrollUp } from '../scroll-up.js'\n\nfunction onSeeMoreBtnClick() {\n  const seeMoreBtn = document.querySelectorAll('.button-see-more');\n  seeMoreBtn.forEach(btn => {\n    btn.addEventListener('click', async function () {\n      const categoryElement = this.dataset.catname;\n      const booksByCategory = await getBookByCategory(categoryElement);\n      renderBookListByCategory(booksByCategory, categoryElement);\n      currentCategory(categoryElement);\n      scrollUp();\n    });\n  });\n}\n\n// const scrollUpBtn = document.querySelector('.scroll-up');\n// console.log(scrollUpBtn);\n// scrollUpBtn.style.display = 'none';\n\n// function showScrollUpBtn() {\n//   if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {\n//     scrollUpBtn.style.display = 'block';\n//   } else {\n//     scrollUpBtn.style.display = 'none';\n//   }\n// }\n\n// export function scrollUp() {\n//   window.scrollTo({\n//     top: 0,\n//     left: 0,\n//     behavior: 'smooth',\n//   });\n// }\n\n// scrollUpBtn.addEventListener('click', scrollUp);\n// window.addEventListener('scroll', showScrollUpBtn);","import {\n  getBookCategoryList,\n  getTopBooks,\n  getBookByCategory,\n} from '../home_page/books-api';\nimport {\n  renderCategoryList,\n  currentCategory,\n  onPageLoad,\n  renderBookListByCategory,\n} from './render';\n\nconst refs = {\n  category: document.querySelector('.categories-elements'),\n  pageHeader: document.querySelector(\".header-home\"),\n};\n\ninit();\n\nasync function init() {\n  try {\n    const categoryFetch = await getBookCategoryList();\n    refs.category.insertAdjacentHTML(\n      'beforeend',\n      await renderCategoryList(categoryFetch)\n    );\n    document.querySelectorAll('.category-link').forEach(link => {\n      link.addEventListener('click', handleCategoryClick);\n    });\n  } catch (error) {}\n}\n/*****************************Add */\nasync function handleCategoryClick(event) {\n  event.preventDefault();\n  const category = event.target.textContent.trim();\n  if (category === 'All categories') {\n    onPageLoad();\n    currentCategory(event.target.dataset.category);\n  } else {\n    const booksByCategory = await getBookByCategory(category);\n    renderBookListByCategory(booksByCategory, category);\n    currentCategory(event.target.dataset.category);\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n  refs.pageHeader.dataset.pageName = 'home';\n});\n"],"names":["scrollUpBtn","showScrollUpBtn","scrollUp","renderCategoryList","fetch","markup","list_name","currentCategory","value","currentCategoryElement","newCategoryElement","listBooksByCategory","onPageLoad","getLimitedBooks","books","createBookListOnMain","bookCard","limitedBooks","catName","result","title","_id","author","book_image","renderBookListOnMain","topBooks","getTopBooks","onSeeMoreBtnClick","bookListByCategory","booksByCategory","words","firstPart","lastWord","renderBookListByCategory","btn","categoryElement","getBookByCategory","refs","init","categoryFetch","getBookCategoryList","link","handleCategoryClick","event","category"],"mappings":"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"}