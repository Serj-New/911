{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list_page/local-storage.js","../src/js/shopping-list_page/shopping-list.js"],"sourcesContent":["import { getBookById } from '../home_page/books-api';\n\n// handleAddBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для додавання книжки\n// handleAddBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для додавання книжки\n\n// handleDelBtnClick(\"643282b1e85766588626a081\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b1e85766588626a0b2\"); //розкоментувати для видалення книжок\n// handleDelBtnClick(\"643282b2e85766588626a112\"); //розкоментувати для видалення книжок\n\n\nexport async function handleAddBtnClick(bookId) {\n  const data = await getBookById(bookId);\n  saveToLS(data._id, data);\n}\n\nexport function handleDelBtnClick(bookId) {\n  localStorage.removeItem(bookId);\n}\n\nexport function handleGetBtnClick() {\n  const itemCount = localStorage.length;\n  const downloadedBooks = [];\n\n  for (let i = 0; i < itemCount; i++) {\n    const key = localStorage.key(i);\n    const value = loadFromLS(key);\n\n    if (value._id) {\n      downloadedBooks.push(value);\n    }\n  }\n    return downloadedBooks;\n}\n\nfunction saveToLS(key, value) {\n  const serializedData = JSON.stringify(value);\n  localStorage.setItem(key, serializedData);\n}\n\nfunction loadFromLS(key) {\n  const serializedData = localStorage.getItem(key);\n  try {\n    return JSON.parse(serializedData);\n  } catch {\n    return serializedData;\n  }\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { handleAddBtnClick, handleGetBtnClick, handleDelBtnClick } from './local-storage'; // видалити handleAddBtnClick\n\nconst refs = {\n    shopListEmptElem: document.querySelector(\".shop-list-empty\"),\n    shopListElem: document.querySelector(\".shop-list\"),\n    paginationElem: document.getElementById(\"pagination\"),\n    pageHeader: document.querySelector(\".header-home\"),\n}\n        \nhandleAddBtnClick(\"643282b1e85766588626a081\"); // видалити\nhandleAddBtnClick(\"643282b1e85766588626a0b2\"); //\nhandleAddBtnClick(\"643282b2e85766588626a112\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0d4\"); //\nhandleAddBtnClick(\"643282b1e85766588626a085\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0b6\"); //\nhandleAddBtnClick(\"643282b1e85766588626a087\"); //\nhandleAddBtnClick(\"643282b2e85766588626a0f2\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0d2\"); //\nhandleAddBtnClick(\"643282b1e85766588626a086\"); //\nhandleAddBtnClick(\"643282b2e85766588626a116\"); //\nhandleAddBtnClick(\"643282b2e85766588626a0f4\"); //\nhandleAddBtnClick(\"643282b1e85766588626a0b4\"); //\n\nfunction getBooks() {\n    return handleGetBtnClick();\n}\n\nconst pagination = new Pagination('pagination', {\n    totalItems: getBooks().length,\n    itemsPerPage: window.innerWidth < 768 ? 4 : 3, \n    visiblePages: window.innerWidth < 768 ? 2 : 3,\n    centerAlign: true,\n});\nrenderWithPagination();\n\nwindow.addEventListener(\"resize\", onResize);\nfunction onResize() {\n    const targetPage = pagination.getCurrentPage();\n    pagination.movePageTo(targetPage);\n}\n\npagination.on('afterMove', (event) => {\n    const itemsPerPage = window.innerWidth < 768 ? 4 : 3;\n    pagination.setItemsPerPage(itemsPerPage);\n    renderWithPagination();\n}); \n\nfunction renderWithPagination() {\n    if (checkIfEmpty()) {\n        const currentPage = pagination.getCurrentPage();\n        const itemsPerPage = window.innerWidth < 768 ? 4 : 3;\n        const startIndex = (currentPage - 1) * itemsPerPage;\n        const endIndex = startIndex + itemsPerPage;\n        const booksToRender = getBooks().slice(startIndex, endIndex);\n        renderShopList(booksToRender);\n    }\n}\n\nfunction renderShopList(booksList) {\n    const deleteBtnElements = document.querySelectorAll(\".shop-list-delete-btn\");\n    deleteBtnElements.forEach(button => {\n        button.removeEventListener(\"click\", onDeleteBtnClick);\n    });\n    const markup = shopListTemplate(booksList);\n    refs.shopListElem.innerHTML = markup;\n    const newDeleteBtnElements = document.querySelectorAll(\".shop-list-delete-btn\");\n    newDeleteBtnElements.forEach(button => {\n        button.addEventListener(\"click\", onDeleteBtnClick);\n    });\n}\nfunction checkIfEmpty() {\n    if (getBooks().length === 0) {\n        refs.shopListElem.classList.add(\"is-hidden\");\n        refs.paginationElem.classList.add(\"is-hidden\");\n        refs.shopListEmptElem.classList.remove(\"is-hidden\");\n        return false;\n    } else {\n        refs.shopListElem.classList.remove(\"is-hidden\");\n        refs.shopListEmptElem.classList.add(\"is-hidden\");\n        refs.paginationElem.classList.remove(\"is-hidden\");\n        return true;\n    }\n}\nfunction onDeleteBtnClick(event) {\n    const id = event.target.closest(\".shop-list-item\").id;\n    handleDelBtnClick(id);\n    const bookToRemove = document.getElementById(id);\n    bookToRemove.parentNode.removeChild(bookToRemove);\n    const userCurrentPage = pagination.getCurrentPage();\n    pagination.reset(getBooks().length);\n    renderWithPagination();\n    pagination.movePageTo(userCurrentPage);\n    checkIfEmpty();\n}\n\nfunction shopListTemplate(books) {\n    return books.map(bookTemplate).join(\"\");\n}\n\nfunction bookTemplate(book) {\n    const { _id, book_image, title, list_name, description, author, amazon_product_url, buy_links } = book;\n\n    return `<li class=\"shop-list-item\" id=\"${_id}\">\n        <img class=\"shop-list-img\"\n            src=\"${book_image}\"\n            alt=\"${title}\" />  \n        <div class=\"book-info\">\n        <h1 class=\"book-title\">${title}</h1>\n        <p class=\"book-category\">${list_name}</p>\n        <p class=\"book-description\">${description}</p>\n        <div class=\"card-footer\">\n        <p class=\"book-author\">${author}</p>\n        <ul class=\"book-shop-links\">\n        <li><a href=\"${amazon_product_url}\" target=\"_blank\"><img class=\"book-shop-img amazon-logo\"\n        srcset=\"\n        /img/internet-shops/amazon@1x.png 1x,\n        /img/internet-shops/amazon@2x.png 2x\" \n        src=\"/img/internet-shops/amazon@1x.png\"\n        alt=\"Amazon logo\"\n        width=\"32\"\n        height=\"11\"/></a></li>\n        <li><a class=\"book-shop-link\" href=\"${buy_links[1].url}\" target=\"_blank\"><img class=\"book-shop-img apple-books-logo\"\n        srcset=\"\n        /img/internet-shops/book@1x.png 1x,\n        /img/internet-shops/book@2x.png 2x\" \n        src=\"/img/internet-shops/book@1x.png\"\n        alt=\"Apple Books logo\"\n        width=\"16\"\n        height=\"16\"/></a></li>\n        </ul>\n        </div> \n        </div>\n        <button class=\"shop-list-delete-btn\"><svg class=\"delete-btn-icon\">\n                  <use href=\"/img/icons.svg#icon-trash\"></use>\n                </svg></button>\n    </li>`;\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n    refs.pageHeader.dataset.pageName = 'shopping-list';\n});\n\n\nconst burgerModalElem = document.querySelector('.mobile-menu-container');\nconst burgerMenuBtnElem = document.querySelector('.burger-menu');\nconst burgerMenuCloseBtnElem = document.querySelector('.mobile-menu__button');\n\nburgerMenuBtnElem.addEventListener('click', onBurgerMenuBtnClick);\nburgerMenuCloseBtnElem.addEventListener('click', onBurgerMenuCloseBtnClick);\n\nfunction onBurgerMenuBtnClick(e) {\n  burgerModalElem.style.display = 'block';\n  burgerMenuBtnElem.style.display = 'none';\n}\nfunction onBurgerMenuCloseBtnClick(e) {\n  burgerModalElem.style.display = 'none';\n  burgerMenuBtnElem.style.display = 'block';\n}\n\nwindow.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    burgerModalElem.style.display = 'none';\n    burgerMenuCloseBtnElem.style.display = 'none';\n    burgerMenuBtnElem.style.display = 'none';\n  });"],"names":["handleAddBtnClick","bookId","data","getBookById","saveToLS","handleDelBtnClick","handleGetBtnClick","itemCount","downloadedBooks","i","key","value","loadFromLS","serializedData","refs","getBooks","pagination","Pagination","renderWithPagination","onResize","targetPage","event","itemsPerPage","checkIfEmpty","currentPage","startIndex","endIndex","booksToRender","renderShopList","booksList","button","onDeleteBtnClick","markup","shopListTemplate","id","bookToRemove","userCurrentPage","books","bookTemplate","book","_id","book_image","title","list_name","description","author","amazon_product_url","buy_links","burgerModalElem","burgerMenuBtnElem","burgerMenuCloseBtnElem","onBurgerMenuBtnClick","onBurgerMenuCloseBtnClick"],"mappings":"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"}